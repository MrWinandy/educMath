\usepackage{kpfonts}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
%\usepackage[latin1]{inputenc}
\usepackage[francais]{babel}
\usepackage{scrpage2}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{latexsym}
\usepackage[explicit]{titlesec}
\usepackage[titles]{tocloft}
\usepackage{color}
\usepackage{setspace}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{graphicx}
\usepackage{enumitem}
\usepackage{mdwlist}
\usepackage{multicol, lipsum}
\usepackage{eurosym}
\usepackage{ifthen}
\usepackage{tkz-euclide}
\usetkzobj{all}
\usepackage{tikz}
\usepackage{tabularx}
\usepackage{array}
\usepackage[pdfborder={0 0 0}]{hyperref}
\usepackage{stmaryrd}
\usepackage{mathrsfs}
\usepackage{pdflscape}
%\usepackage[thinlines]{easytable}
%\usepackage{pst-plot}
%\usepackage{mathtools}
\usepackage{multirow}

%---------------------Jeff
\usepackage{textcomp}
\usepackage{tasks}
\usepackage{ragged2e}
\usepackage{xargs}
\usepackage{pgfplots}
\pgfplotsset{compat=1.11}

\usetikzlibrary{arrows, shadows, positioning}
\usetikzlibrary{external}
\usetikzlibrary{calc}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{fit}
\usetikzlibrary{arrows.meta}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\definecolor{gro}{rgb}{0.75,0.75,0.75}
\def\baseColor{red}



\mdfdefinestyle{envBoxBase}{
	linecolor = \baseColor!80,
	middlelinewidth = 2pt,
	roundcorner=5pt,
	backgroundcolor = \baseColor!10,
	innertopmargin=\baselineskip,
	innerbottommargin=\baselineskip,
	innerleftmargin=\topskip,
	innerrightmargin=\topskip,
	frametitlebackgroundcolor=\baseColor!80,
	frametitlefont=\color{white}\Large\bfseries,
	nobreak=true
}

\newcommand{\JWAddNewTheoremStyle}[4]{
	\mdtheorem[style=envBoxBase]{#1}{#2}
	\newenvironment{#4}[1][]{
		\def\baseColor{#3}
		\begin{#1}[##1]
		}{\end{#1}}
}

\JWAddNewTheoremStyle{definitionEnv}{DÃ©finition}{red}{defn}
\JWAddNewTheoremStyle{stationEnv}{Station}{black}{station}

\titleformat{\chapter}[display]
{\huge\bfseries}
{
	\chapterbox{#1}
}
{10pt}
{\bfseries}{\normalfont}

\titleformat{\section}[display]
{\huge\bfseries}
{
	\sectionbox{#1}
}
{10pt}
{\bfseries}{\normalfont}



\newcommand{\chapterbox}[1]{
	\def\chapIndent{2mm}
	\def\boxHeight{2cm}
	\begin{tikzpicture}[rounded corners,thick]
	\node (title) at (0,0) {\chaptername};
	\draw (title.west) --++(180:\chapIndent) --++(90:\boxHeight) --++(0:\textwidth) --++(-90:\boxHeight) -- (title.east);
	\node[anchor=west,fill=white,inner xsep=-2mm,xshift=\chapIndent,draw,yshift=\boxHeight/2] (chapternumber) at (title.east) {\fontsize{110}{132} \selectfont \thechapter};
	\node[anchor=west,](label) at (chapternumber.east) {\Huge#1};
	\end{tikzpicture}
}


\pgfdeclarelayer{bg}    % declare background layer
\pgfsetlayers{bg,main}  % set the order of the layers (main is the standard layer)
\newcommand{\sectionbox}[1]{
	\def\chapIndent{2mm}
	\def\boxHeight{1cm}
	\begin{tikzpicture}[rounded corners,thick]
	\node[anchor=west,fill=white,draw,inner xsep=0mm] (chapternumber) at (0,0) {\fontsize{40}{48} \selectfont \thesection};
	\begin{pgfonlayer}{bg}    % select the background layer
		\node[anchor=west,draw,xshift=-5mm](label) at (chapternumber.east) {\hspace*{5mm}\huge#1};
	\end{pgfonlayer}
	\end{tikzpicture}
}



















