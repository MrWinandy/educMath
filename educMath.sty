\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{educMath}[2018/09/25 Education Math Package]

\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsfonts}
\RequirePackage{eurosym}
\RequirePackage{calrsfs}
\RequirePackage{tasks}
\settasks{before-skip=\medskipamount,after-skip=\medskipamount}
\RequirePackage{multicol}
\RequirePackage{xargs}
\RequirePackage{keyval}
\RequirePackage{pgfplots}
\pgfplotsset{compat=1.11}
\RequirePackage{tkz-euclide}
\usetkzobj{all}

\RequirePackage{systeme}

\RequirePackage{icomma}
\RequirePackage{siunitx}
\sisetup{
	add-decimal-zero = true , % default setting, not needed
	output-decimal-marker = {,} ,
	group-separator = \, % default setting, not needed
}

\RequirePackage{tikz}
\usetikzlibrary{arrows, shadows, positioning}
\usetikzlibrary{external}
\usetikzlibrary{calc}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{fit}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{intersections}

\definecolor{gro}{rgb}{0.75,0.75,0.75}

\newcommand{\lk}{\left(}
\newcommand{\rk}{\right)}

\renewcommand{\degre}{{\ensuremath ^\circ}}

\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Div}{div}
\DeclareMathOperator{\PGCD}{PGCD}
\DeclareMathOperator{\PPCM}{PPCM}

\DeclareMathOperator{\h}{h}

%Ensembles
\newcommand{\C}{\mathbb{C}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
%\newcommand{\D}{\mathbb{D}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}

\def\D{\mathbb{D}}


% Haisecher wéi am Heft 
\newcommand{\heft}[2]
{\noindent
	\begin{tikzpicture}[scale=1.05, line cap=round,line join=round,>=triangle 45,x=1.0cm,y=1.0cm]
	\draw [color=gro,dash pattern=on 1pt off 1pt, xstep=0.5cm,ystep=0.5cm] (0,0) grid (#1,#2);
	\clip(0,0) rectangle (#1,#2);
	\end{tikzpicture}
}

% ligne vun Haisecher (Jeff)
\newcommand{\blank}[1]{{\heft{#1}{0.5}}}
\newcommand{\midheft}[2]{{\raisebox{-0.15cm}{\heft{#1}{#2}}}}
\newcommand{\midblank}[1]{{\raisebox{-0.15cm}{\heft{#1}{0.5}}}}
\newcommand{\blankfield}[1]{{\centering{\heft{15}{#1}}}}
\newcommand{\halfblankfield}[1]{{\centering{\heft{7}{#1}}}}
\newcommand{\blankspace}{\midblank{0.5}}


%------------------ tableau de proportionnalité

\newenvironmentx{proptableau}[3][1=3.5cm,2=5,3=1cm,usedefault]
{\setstretch{1}\setlength{\extrarowheight}{5pt}
	\begin{center}
		\begin{tabular}{|m{#1}|*{#2}{>{\centering\arraybackslash}m{#3}|}}
		}{
\end{tabular}\end{center}}


% ----------------------- axis
\pgfplotsset{
	standardaxis/.style={
		enlarge x limits=0.15,
		enlarge y limits=0.15,
		%every axis x label/.style={at={(current axis.right of origin)},anchor=north west},
		every axis y label/.style={at={(current axis.above origin)},anchor=north east},
		axis lines=middle,
		axis line style={-Stealth,very thick},
		xmin=-10.5,xmax=10.5,ymin=-10.5,ymax=10.5,
		xtick distance=1,
		ytick distance=1,
		extra x ticks={0},
		extra x tick style={grid style={black},xticklabel style={below left=-0.2em},xtick style={black}},
		xticklabel style={font=\tiny},
		yticklabel style={font=\tiny},
		xlabel=$x$,
		ylabel=$y$,
		grid=major,
		grid style={thin,densely dotted,black!20}
	}}

\pgfplotsset{
	standardaxis2/.style={
		enlarge x limits=0.15,
		enlarge y limits=0.15,
		%every axis x label/.style={at={(current axis.right of origin)},anchor=north west},
		every axis y label/.style={at={(current axis.above origin)},anchor=north east},
		axis lines=middle,
		axis line style={-Stealth,very thick},
		xmin=-10.5,xmax=10.5,ymin=-10.5,ymax=10.5,
		xtick distance=1,
		ytick distance=1,
		extra x ticks={0},
		extra x tick style={grid style={black},xticklabel style={below left=-1.2em},xtick style={black}},
		xticklabel style={font=\tiny, below =-0.6em},
		yticklabel style={font=\tiny, left =-0.6em},
		xlabel=$x$,
		ylabel=$y$,
		xlabel style={right=-0.2cm},
		ylabel style={above = -0.2cm},
		grid=major,
		grid style={thin,densely dotted,black!20}
}}

\makeatletter

\define@key{myAxis}{xmin}{\def\myxmin{#1}}
\define@key{myAxis}{xmax}{\def\myxmax{#1}}
\define@key{myAxis}{ymin}{\def\myymin{#1}}
\define@key{myAxis}{ymax}{\def\myymax{#1}}
\define@key{myAxis}{xlabel}{\def\myxlabel{#1}}
\define@key{myAxis}{ylabel}{\def\myylabel{#1}}
\define@key{myAxis}{scale}{\def\myscale{#1}}
\define@key{myAxis}{addstyle}{\def\myaddstyle{#1}}

\setkeys{myAxis}{xmin=-10.5,ymin=-10.5,xmax=10.5,ymax=10.5,xlabel=$ x $,ylabel=$ y $,scale=0.8,addstyle={}}

\makeatother



\newenvironment{myAxis}[1][]{
	\setkeys{myAxis}{#1}
	\begin{center}
		\begin{tikzpicture}
		\begin{axis}[
		unit vector ratio*=1 1 1,
		width = \myscale\textwidth,
		standardaxis,
		xmin=\myxmin,
		ymin=\myymin,
		xmax=\myxmax,
		ymax=\myymax,
		xlabel=\myxlabel,
		ylabel=\myylabel,
		\myaddstyle]
	}{
		\end{axis}
		\end{tikzpicture}
	\end{center}
}

%----------------------------------------- Statistics

\pgfplotsset{
	statisticsaxis/.style={
		enlarge x limits=0.15,
		enlarge y limits=0.15,
		%every axis x label/.style={at={(current axis.right of origin)},anchor=north west},
		every axis y label/.style={at={(current axis.above origin)},anchor=north west},
		axis x line=bottom,
		axis y line=left,
		axis line style={-Stealth,very thick},
		xmin=0,xmax=10.5,ymin=0,ymax=110,
		xtick distance=1,
%		ytick distance=5,
		ytick={0,5,...,100},
%		extra x ticks={0},
		extra x tick style={grid style={black},xticklabel style={below left=-0.2em},xtick style={black}},
		xticklabel style={font=\tiny},
		yticklabel style={font=\tiny},
		xlabel=$x$,
		ylabel=$\%$,
		grid=major,
		grid style={thin,densely dotted,black!20}
}}

\makeatletter

\define@key{statAxis}{ymax}{\def\myymax{#1}}
\define@key{statAxis}{xmax}{\def\myxmax{#1}}
\define@key{statAxis}{xlabel}{\def\myxlabel{#1}}
\define@key{statAxis}{ylabel}{\def\myylabel{#1}}
\define@key{statAxis}{scale}{\def\myscale{#1}}
\define@key{statAxis}{addstyle}{\def\myaddstyle{#1}}

\setkeys{statAxis}{xmax=10.5,ymax=110,xlabel=$ x $,ylabel=Fréquences cumulées en $ \% $,scale=0.8,addstyle={}}

\makeatother

\newenvironment{CFPlot}[1][]{
	\setkeys{statAxis}{#1}
	\begin{center}
		\begin{tikzpicture}
		\begin{axis}[
		statisticsaxis,
		width = \myscale\textwidth,
		xmax=\myxmax,
		ymax=\myymax,
		xlabel=\myxlabel,
		ylabel=\myylabel,
		\myaddstyle]
	}{
		\end{axis}
		\end{tikzpicture}
	\end{center}
}

%---------------------------- fractions

\makeatletter
\define@key{myFraxx}{scale}{\def\myFraxxscale{#1}}
\define@key{myFraxx}{color}{\def\mycolor{#1}}
\define@key{myFraxx}{opacity}{\def\myopacity{#1}}
\define@key{myFraxx}{offset}{\def\myoffset{#1}}
\makeatother

\setkeys{myFraxx}{color=black,opacity=30,scale=1,offset=0}

\newcommand{\fracPie}[3][1]{
	\setkeys{myFraxx}{#1}
	\begin{tikzpicture}
	\def\radius{\myFraxxscale*1cm}
	\def\angl{360/#3}
	\filldraw[fill=\mycolor!\myopacity] (\angl+\angl*\myoffset:\radius) arc (\angl+\angl*\myoffset:(#2+1)*\angl+\angl*\myoffset:\radius) -- (0,0) -- cycle;
	\foreach \n in {1,...,#3}{
		\draw (0,0) -- (\n*\angl:\radius);
	}
	\draw (0,0) circle (\radius);
	\end{tikzpicture}
	\setkeys{myFraxx}{color=black,opacity=30,scale=1,offset=0}
}

\newcommand{\fracRectH}[3][1]{
	\setkeys{myFraxx}{#1}
	\begin{tikzpicture}
	\def\long{\myFraxxscale*3cm/#3}
	\filldraw[fill=\mycolor!\myopacity] (0,0) rectangle (\long*#2,\long);
	\foreach \n in {1,...,#3}{
		\draw (\n*\long,0) -- (\n*\long,\long);
	}
	\draw (0,0) rectangle (\long*#3,\long);
	\end{tikzpicture}
	\setkeys{myFraxx}{color=black,opacity=30,scale=1,offset=0}
}

\newcommand{\fracRectV}[3][1]{
	\setkeys{myFraxx}{#1}
	\begin{tikzpicture}
	\def\long{\myFraxxscale*3cm/#3}
	\filldraw[fill=\mycolor!\myopacity] (0,0) rectangle (\long,\long*#2);
	\foreach \n in {1,...,#3}{
		\draw (0,\n*\long) -- (\long,\n*\long);
	}
	\draw (0,0) rectangle (\long,\long*#3);
	\end{tikzpicture}
	\setkeys{myFraxx}{color=black,opacity=30,scale=1,offset=0}
}


\newcounter{tmpcounter}
\newcommand{\fracRectTwoD}[3][1]{
	\setkeys{myFraxx}{#1}
	\begin{tikzpicture}
	\def\long{\myFraxxscale*3cm/#3}
	\setcounter{tmpcounter}{0}
	\foreach \i in {#2}{
		\edef\counter{\arabic{tmpcounter}}
		\filldraw[fill=\mycolor!\myopacity] (\counter*\long,0) rectangle (\counter*\long+\long,\long*\i);
		\foreach \n in {1,...,#3}{
			\draw (\counter*\long,\n*\long) -- (\counter*\long+\long,\n*\long);
		}
		\draw (\counter*\long,0) rectangle (\counter*\long+\long,\long*#3);
		\stepcounter{tmpcounter}
	}
	\end{tikzpicture}
	\setkeys{myFraxx}{color=black,opacity=30,scale=1,offset=0}
}


%pyramide exercises
\newcommand{\pyramideBox}[2]{
	\draw #1 rectangle #2;
}

\newcommand{\mathresult}[1]{\pgfmathparse{#1}\pgfmathsetmacro\mymathresult{\pgfmathresult}}

\newcommand{\nth}[2]{
	\foreach \x [count=\k] in #1 {
		\ifnum\k=#2
		\x
		\fi
	}
}

\newcounter{itemcounter}
\newcommand{\pyramide}[3][+]{
	\begin{tikzpicture}
		\setcounter{itemcounter}{1}
		\foreach \myrow in {1,...,#2}{
			\foreach \mycol in {1,...,\myrow}{
				\edef\counter{\arabic{itemcounter}}
				
				\mathresult{-0.5*\myrow+\mycol-1}
				\edef\lowerleftx{\mymathresult}
				
				\mathresult{-0.5*\myrow}\mymathresult
				\edef\lowerlefty{\mymathresult}
				
				\mathresult{-0.5*\myrow+\mycol}\mymathresult
				\edef\upperrightx{\mymathresult}
				
				\mathresult{-0.5*\myrow+0.5}\mymathresult
				\edef\upperrighty{\mymathresult}
				
				
				\edef\lowerleft{(\lowerleftx,\lowerlefty)}
				\edef\upperright{(\upperrightx,\upperrighty)}
				\pyramideBox{\lowerleft}{\upperright}
				
				\node[xshift=0.5cm,yshift=0.25cm] at (\lowerleftx,\lowerlefty){\nth{{#3}}{\counter}};
				
				\stepcounter{itemcounter}
			}
		}
	
		\begin{scope}[scale=0.9,xshift=-0.5cm]
			\draw (2,0) rectangle (3,0.5);
			\draw (3,0) rectangle (4,0.5);
			\draw (2.5,0.5) rectangle (3.5,1);
			\node at (2.5,0.25){$ a $};
			\node at (3.5,0.25){$ b $};
			\node at (3,0.75){$ a #1 b $};
		\end{scope}
	\end{tikzpicture}
}



%Balance for visualizing equations
\newcommand{\equationBalance}[2]{
	
	\begin{tikzpicture}[
	rounded corners=0,
	joint/.style = { inner sep=0, minimum size=0.1mm,fill=black,draw,circle},
	arg/.style = { inner sep=0,rectangle}
	]
	\node[joint] (base) at (0,0) {};
	\node[joint,below left= 0.8 of base] (base1) {};
	\node[joint,below right= 0.8 of base] (base2) {};
	\draw[fill=black!20] (base.center) -- (base1.center) -- (base2.center) -- cycle;
	
	\node[joint,left= 1.5 of base.north] (leftJoint) {};
	\node[joint,right= 1.5 of base.north] (rightJoint) {};
	\draw (leftJoint) -- (rightJoint);
	
	%right side
	\node[joint,above left= 0.8 of leftJoint](leftBase) {};
	\draw (leftBase) -- (leftJoint);
	
	\node[joint,left= 0.8 of leftBase] (leftBaseLeftJoint) {};
	\node[joint,right= 0.8 of leftBase] (leftBaseRightJoint) {};
	\draw (leftBaseLeftJoint) -- (leftBaseRightJoint);
	
	\node[joint,above left= 0.5 of leftBaseLeftJoint] (leftBaseLeftArm) {};
	\draw (leftBaseLeftJoint) -- (leftBaseLeftArm);
	\node[joint,above right= 0.5 of leftBaseRightJoint] (leftBaseRightArm) {};
	\draw (leftBaseRightJoint) -- (leftBaseRightArm);
	
	%left side
	\node[joint,above right= 0.8 of rightJoint](rightBase) {};
	\draw (rightBase) -- (rightJoint);
	
	\node[joint,left= 0.8 of rightBase] (rightBaseLeftJoint) {};
	\node[joint,right= 0.8 of rightBase] (rightBaseRightJoint) {};
	\draw (rightBaseLeftJoint) -- (rightBaseRightJoint);
	
	\node[joint,above left= 0.5 of rightBaseLeftJoint] (rightBaseLeftArm) {};
	\draw (rightBaseLeftJoint) -- (rightBaseLeftArm);
	\node[joint,above right= 0.5 of rightBaseRightJoint] (rightBaseRightArm) {};
	\draw (rightBaseRightJoint) -- (rightBaseRightArm);
	
	
	\newsavebox\leftbox
	
	\begin{lrbox}{\leftbox}
	#1
	\end{lrbox}
	
	\newsavebox\rightbox
	
	\begin{lrbox}{\rightbox}
	#2
	\end{lrbox}
	
	\node[above=0mm of leftBase,arg](leftArg) {\usebox\leftbox};
	\node[above=0mm of rightBase,arg](rightArg) {\usebox\rightbox};
	
	\global\let\leftbox\relax
	\global\let\rightbox\relax
	
	\end{tikzpicture}
	
}







% Faarwen défineiren
\def\scriptcolor{navy}
\definecolor{webgreen}{rgb}{0, 0.5, 0} % less intense green
\definecolor{webblue}{rgb}{0, 0, 0.5} % less intense blue
\definecolor{webred}{rgb}{0.5, 0, 0} % less intense red                                                        
\definecolor{lightslategray}{RGB}{119, 136, 153}
\definecolor{darkslategray}{RGB}{47, 79, 79}
\definecolor{steelblue}{RGB}{70, 130, 180}
%\definecolor{midnightblue}{RGB}{25, 25, 112}
\definecolor{darkcyan}{RGB}{0, 139, 139}
%\definecolor{lightseagreen}{RGB}{32,  178, 170}
%\definecolor{aqua}{RGB}{0, 255, 255}
\definecolor{turquoise}{RGB}{0, 206, 209}
%\definecolor{cadetblue}{RGB}{95, 158, 160}
\definecolor{blueviolet}{RGB}{138, 43, 226}
%\definecolor{darkviolet}{RGB}{148, 0, 211}
\definecolor{navy}{RGB}{0, 0, 128}
\definecolor{royalblue}{RGB}{65, 105, 225}
\definecolor{skyblue}{RGB}{135, 206, 250}
\definecolor{slateblue}{RGB}{106, 90, 205}
\definecolor{darkslateblue}{RGB}{72, 61, 139}
\definecolor{palegreen}{RGB}{152, 251, 152}
\definecolor{limegreen}{RGB}{50, 205, 50}
\definecolor{medseagreen}{RGB}{60, 179, 113}
\definecolor{darkgreen}{RGB}{0, 100, 0}
\definecolor{forestgreen}{RGB}{34, 139, 34}
\definecolor{olivedrab}{RGB}{107, 142, 35}
\definecolor{darkolivegreen}{RGB}{85, 107, 47}
\definecolor{orangered}{RGB}{255, 69, 0}
\definecolor{darkorange}{RGB}{255, 140, 0}
\definecolor{indianred}{RGB}{255, 50, 50}
\definecolor{darkred}{RGB}{139, 0, 0}
\definecolor{newdarkred}{RGB}{204, 0, 0}
\definecolor{firebrick}{RGB}{178, 34, 34}
\definecolor{gold}{RGB}{255, 215, 0}
\definecolor{darkgoldenrod}{RGB}{184, 134, 11}
\definecolor{sienna}{RGB}{160, 82, 45}
\definecolor{chocolate}{RGB}{210, 105, 30}
\definecolor{brown}{RGB}{165, 42, 42}
\definecolor{gro}{rgb}{0.75,0.75,0.75}